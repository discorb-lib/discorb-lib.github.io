<!DOCTYPE html>
<html>
  <head>
<link rel="shortcut icon" href="/favicon.png" />
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Discorb::Messageable
  
    &mdash; discorb (main) documentation
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Discorb::Messageable";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../a_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span>
     &raquo; 
    <span class="title">Messageable</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Discorb::Messageable
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="DMChannel.html" title="Discorb::DMChannel (class)">DMChannel</a></span>, <span class='object_link'><a href="TextChannel.html" title="Discorb::TextChannel (class)">TextChannel</a></span>, <span class='object_link'><a href="ThreadChannel.html" title="Discorb::ThreadChannel (class)">ThreadChannel</a></span>, <span class='object_link'><a href="User.html" title="Discorb::User (class)">User</a></span>, <span class='object_link'><a href="VoiceChannel.html" title="Discorb::VoiceChannel (class)">VoiceChannel</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/discorb/modules.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Module for sending and reading messages.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_message-instance_method" title="#delete_message (instance method)">#<strong>delete_message</strong>(message_id, reason: nil) -&gt; Async::Task&lt;void&gt; </a>
    

    
      (also: #destroy_message)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Delete a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#edit_message-instance_method" title="#edit_message (instance method)">#<strong>edit_message</strong>(message_id, content = Discorb::Unset, embed: Discorb::Unset, embeds: Discorb::Unset, allowed_mentions: Discorb::Unset, attachments: Discorb::Unset, components: Discorb::Unset, supress: Discorb::Unset) -&gt; Async::Task&lt;void&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Edit a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_message-instance_method" title="#fetch_message (instance method)">#<strong>fetch_message</strong>(id) -&gt; Async::Task&lt;Discorb::Message&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch a message from ID.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_messages-instance_method" title="#fetch_messages (instance method)">#<strong>fetch_messages</strong>(limit = 50, before: nil, after: nil, around: nil) -&gt; Async::Task&lt;Array&lt;Discorb::Message&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch a message history.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_pins-instance_method" title="#fetch_pins (instance method)">#<strong>fetch_pins</strong> -&gt; Async::Task&lt;Array&lt;Discorb::Message&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch the pinned messages in the channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pin_message-instance_method" title="#pin_message (instance method)">#<strong>pin_message</strong>(message, reason: nil) -&gt; Async::Task&lt;void&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pin a message in the channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post-instance_method" title="#post (instance method)">#<strong>post</strong>(content = nil, tts: false, embed: nil, embeds: nil, allowed_mentions: nil, reference: nil, components: nil, attachment: nil, attachments: nil) -&gt; Async::Task&lt;Discorb::Message&gt; </a>
    

    
      (also: #send_message)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Post a message to the channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#typing-instance_method" title="#typing (instance method)">#<strong>typing</strong> -&gt; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Trigger the typing indicator in the channel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unpin_message-instance_method" title="#unpin_message (instance method)">#<strong>unpin_message</strong>(message, reason: nil) -&gt; Async::Task&lt;void&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unpin a message in the channel.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="delete_message-instance_method">
  
    #<strong>delete_message</strong>(message_id, reason: nil) -&gt; <tt>Async::Task&lt;void&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='destroy_message-instance_method'>destroy_message</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Delete a message.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message_id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message id.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The reason for deleting the message.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;void&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The task.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_message'>delete_message</span><span class='lparen'>(</span><span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span> <span class='label'>reason:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='ivar'>@client</span>
      <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
      <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
        <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/messages/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message_id'>message_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/messages/:message_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='symbol'>:delete</span>
        <span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='label'>audit_log_reason:</span> <span class='id identifier rubyid_reason'>reason</span>
      <span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="edit_message-instance_method">
  
    #<strong>edit_message</strong>(message_id, content = Discorb::Unset, embed: Discorb::Unset, embeds: Discorb::Unset, allowed_mentions: Discorb::Unset, attachments: Discorb::Unset, components: Discorb::Unset, supress: Discorb::Unset) -&gt; <tt>Async::Task&lt;void&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>The arguments of this method are defaultly set to <code>Discorb::Unset</code>.
Specify value to set the value, if not don&#39;t specify or specify <code>Discorb::Unset</code>.</p>
</div>
  </div>

<p>Edit a message.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message_id</span>
      
      
        <span class='type'>(<tt>#to_s</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message id.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The message content.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>embed</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Embed.html" title="Discorb::Embed (class)">Discorb::Embed</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The embed to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>embeds</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Embed.html" title="Discorb::Embed (class)">Discorb::Embed</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The embeds to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>allowed_mentions</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AllowedMentions.html" title="Discorb::AllowedMentions (class)">Discorb::AllowedMentions</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The allowed mentions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attachments</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Attachment.html" title="Discorb::Attachment (class)">Discorb::Attachment</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The new attachments.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>components</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Discorb::Component</a></span>&gt;</tt>, <tt>Array&lt;Array&lt;<span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Discorb::Component</a></span>&gt;&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The components to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>supress</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Discorb::Unset</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether to supress embeds.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;void&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The task.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edit_message'>edit_message</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_message_id'>message_id</span><span class='comma'>,</span>
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>embed:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>embeds:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>allowed_mentions:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>attachments:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>components:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span><span class='comma'>,</span>
  <span class='label'>supress:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
<span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
    <span class='id identifier rubyid_tmp_embed'>tmp_embed</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_embed'>embed</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_embed'>embed</span><span class='rbracket'>]</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_embeds'>embeds</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
        <span class='id identifier rubyid_embeds'>embeds</span>
      <span class='kw'>end</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:embeds</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tmp_embed'>tmp_embed</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_tmp_embed'>tmp_embed</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:allowed_mentions</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
      <span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:components</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Component</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_payload'><span class='object_link'><a href="Component.html#to_payload-class_method" title="Discorb::Component.to_payload (method)">to_payload</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_components'>components</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_components'>components</span> <span class='op'>!=</span>
      <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:flags</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_supress'>supress</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>&lt;&lt;</span> <span class='int'>2</span> <span class='op'>:</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_supress'>supress</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_attachments'>attachments</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span>
      <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:attachments</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_attachments'>attachments</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
        <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>description:</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='ivar'>@client</span>
      <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
      <span class='period'>.</span><span class='id identifier rubyid_multipart_request'>multipart_request</span><span class='lparen'>(</span>
        <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/messages/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message_id'>message_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/messages/:message_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='symbol'>:patch</span>
        <span class='rparen'>)</span><span class='comma'>,</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span>
        <span class='id identifier rubyid_attachments'>attachments</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Discorb.html#Unset-constant" title="Discorb::Unset (constant)">Unset</a></span></span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_attachments'>attachments</span>
      <span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_message-instance_method">
  
    #<strong>fetch_message</strong>(id) -&gt; <tt>Async::Task&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch a message from ID.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Snowflake.html" title="Discorb::Snowflake (class)">Discorb::Snowflake</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The ID of the message.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="NotFoundError.html" title="Discorb::NotFoundError (class)">Discorb::NotFoundError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If the message is not found.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_message'>fetch_message</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='id identifier rubyid__resp'>_resp</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span>
      <span class='ivar'>@client</span>
        <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
        <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
          <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/messages/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/messages/:message_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:get</span>
          <span class='rparen'>)</span>
        <span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
    <span class='const'><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Message</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>guild_id:</span> <span class='ivar'>@guild_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_messages-instance_method">
  
    #<strong>fetch_messages</strong>(limit = 50, before: nil, after: nil, around: nil) -&gt; <tt>Async::Task&lt;Array&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch a message history.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>limit</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>50</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The number of messages to fetch.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>before</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Snowflake.html" title="Discorb::Snowflake (class)">Discorb::Snowflake</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The ID of the message to fetch before.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>after</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Snowflake.html" title="Discorb::Snowflake (class)">Discorb::Snowflake</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The ID of the message to fetch after.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>around</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Snowflake.html" title="Discorb::Snowflake (class)">Discorb::Snowflake</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The ID of the message to fetch around.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;Array&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The messages.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_messages'>fetch_messages</span><span class='lparen'>(</span><span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='int'>50</span><span class='comma'>,</span> <span class='label'>before:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>after:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>around:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span>
      <span class='lbrace'>{</span>
        <span class='label'>limit:</span> <span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span>
        <span class='label'>before:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='id identifier rubyid_after'>after</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='label'>after:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='id identifier rubyid_around'>around</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='label'>around:</span> <span class='const'><span class='object_link'><a href="../Discorb.html" title="Discorb (module)">Discorb</a></span></span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='id identifier rubyid_before'>before</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_filter'>filter</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__k'>_k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
    <span class='id identifier rubyid__resp'>_resp</span><span class='comma'>,</span> <span class='id identifier rubyid_messages'>messages</span> <span class='op'>=</span>
      <span class='ivar'>@client</span>
        <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
        <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
          <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/messages?</span><span class='embexpr_beg'>#{</span><span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_encode_www_form'>encode_www_form</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/messages</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:get</span>
          <span class='rparen'>)</span>
        <span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
    <span class='id identifier rubyid_messages'>messages</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_m'>m</span><span class='op'>|</span>
      <span class='const'><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Message</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='comma'>,</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>guild_id:</span> <span class='ivar'>@guild_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_pins-instance_method">
  
    #<strong>fetch_pins</strong> -&gt; <tt>Async::Task&lt;Array&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch the pinned messages in the channel.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;Array&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The pinned messages in the channel.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_pins'>fetch_pins</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='id identifier rubyid__resp'>_resp</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span>
      <span class='ivar'>@client</span>
        <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
        <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
          <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/pins</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/pins</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:get</span>
          <span class='rparen'>)</span>
        <span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
    <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pin'>pin</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Message</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='comma'>,</span> <span class='id identifier rubyid_pin'>pin</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pin_message-instance_method">
  
    #<strong>pin_message</strong>(message, reason: nil) -&gt; <tt>Async::Task&lt;void&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Pin a message in the channel.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message to pin.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The reason of pinning the message.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;void&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The task.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pin_message'>pin_message</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='label'>reason:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='ivar'>@client</span>
      <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
      <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
        <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/pins/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/pins/:message_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='symbol'>:put</span>
        <span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='label'>audit_log_reason:</span> <span class='id identifier rubyid_reason'>reason</span>
      <span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post-instance_method">
  
    #<strong>post</strong>(content = nil, tts: false, embed: nil, embeds: nil, allowed_mentions: nil, reference: nil, components: nil, attachment: nil, attachments: nil) -&gt; <tt>Async::Task&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='send_message-instance_method'>send_message</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Post a message to the channel.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The message content.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tts</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Whether the message is tts.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>embed</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Embed.html" title="Discorb::Embed (class)">Discorb::Embed</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The embed to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>embeds</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Embed.html" title="Discorb::Embed (class)">Discorb::Embed</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The embeds to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>allowed_mentions</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="AllowedMentions.html" title="Discorb::AllowedMentions (class)">Discorb::AllowedMentions</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The allowed mentions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reference</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span></tt>, <tt><span class='object_link'><a href="Message/Reference.html" title="Discorb::Message::Reference (class)">Discorb::Message::Reference</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The message to reply to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>components</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Discorb::Component</a></span>&gt;</tt>, <tt>Array&lt;Array&lt;<span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Discorb::Component</a></span>&gt;&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The components to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attachment</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Attachment.html" title="Discorb::Attachment (class)">Discorb::Attachment</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The attachment to send.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>attachments</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Attachment.html" title="Discorb::Attachment (class)">Discorb::Attachment</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The attachments to send.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;<span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message sent.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>tts:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>embed:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>embeds:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>allowed_mentions:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>reference:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>components:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>attachment:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>attachments:</span> <span class='kw'>nil</span>
<span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_content'>content</span> <span class='kw'>if</span> <span class='id identifier rubyid_content'>content</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:tts</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tts'>tts</span>
    <span class='id identifier rubyid_tmp_embed'>tmp_embed</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_embed'>embed</span>
        <span class='lbracket'>[</span><span class='id identifier rubyid_embed'>embed</span><span class='rbracket'>]</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_embeds'>embeds</span>
        <span class='id identifier rubyid_embeds'>embeds</span>
      <span class='kw'>end</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:embeds</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tmp_embed'>tmp_embed</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_tmp_embed'>tmp_embed</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:allowed_mentions</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span>
        <span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_allowed_mentions'>allowed_mentions</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span>
      <span class='kw'>end</span>
    <span class='rparen'>)</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span>
      <span class='symbol'>:message_reference</span>
    <span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_reference'>reference</span><span class='period'>.</span><span class='id identifier rubyid_to_reference'>to_reference</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span> <span class='kw'>if</span> <span class='id identifier rubyid_reference'>reference</span>
    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:components</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Component.html" title="Discorb::Component (class)">Component</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_payload'><span class='object_link'><a href="Component.html#to_payload-class_method" title="Discorb::Component.to_payload (method)">to_payload</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_components'>components</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_components'>components</span>
    <span class='id identifier rubyid_attachments'>attachments</span> <span class='op'>||=</span> <span class='id identifier rubyid_attachment'>attachment</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_attachment'>attachment</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:attachments</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_attachments'>attachments</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
      <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='label'>filename:</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='label'>description:</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_description'>description</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid__resp'>_resp</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span>
      <span class='ivar'>@client</span>
        <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
        <span class='period'>.</span><span class='id identifier rubyid_multipart_request'>multipart_request</span><span class='lparen'>(</span>
          <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/messages</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/messages</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='symbol'>:post</span>
          <span class='rparen'>)</span><span class='comma'>,</span>
          <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span>
          <span class='id identifier rubyid_attachments'>attachments</span>
        <span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
    <span class='const'><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Message</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@client</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>guild_id:</span> <span class='ivar'>@guild_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="typing-instance_method">
  
    #<strong>typing</strong> -&gt; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Trigger the typing indicator in the channel.
If block is given, trigger typing indicator during executing block.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_typing'>typing</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Waiting for 60 seconds...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>60</span>
  <span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Done!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 324</span>

<span class='kw'>def</span> <span class='id identifier rubyid_typing'>typing</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_post_task'>post_task</span> <span class='op'>=</span>
        <span class='const'>Async</span> <span class='kw'>do</span>
          <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
            <span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
              <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/typing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/typing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                <span class='symbol'>:post</span>
              <span class='rparen'>)</span><span class='comma'>,</span>
              <span class='lbrace'>{</span><span class='rbrace'>}</span>
            <span class='rparen'>)</span>
            <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='kw'>yield</span>
    <span class='kw'>ensure</span>
      <span class='id identifier rubyid_post_task'>post_task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ret'>ret</span>
  <span class='kw'>else</span>
    <span class='const'>Async</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__task'>_task</span><span class='op'>|</span>
      <span class='ivar'>@client</span><span class='period'>.</span><span class='id identifier rubyid_http'>http</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
        <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/typing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/typing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='symbol'>:post</span>
        <span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unpin_message-instance_method">
  
    #<strong>unpin_message</strong>(message, reason: nil) -&gt; <tt>Async::Task&lt;void&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Unpin a message in the channel.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Message.html" title="Discorb::Message (class)">Discorb::Message</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The message to unpin.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reason</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The reason of unpinning the message.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Async::Task&lt;void&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The task.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/discorb/modules.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unpin_message'>unpin_message</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='label'>reason:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'>Async</span> <span class='kw'>do</span>
    <span class='ivar'>@client</span>
      <span class='period'>.</span><span class='id identifier rubyid_http'>http</span>
      <span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='lparen'>(</span>
        <span class='const'>Route</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/channels/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_channel_id'>channel_id</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span><span class='embexpr_end'>}</span><span class='tstring_content'>/pins/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>//channels/:channel_id/pins/:message_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='symbol'>:delete</span>
        <span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='label'>audit_log_reason:</span> <span class='id identifier rubyid_reason'>reason</span>
      <span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Nov 26 03:21:15 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.0.2).
</div>

    </div>
  </body>
</html>